summary(G_data)
scorecard <- read_csv('Most+Recent+Cohorts+(Scorecard+Elements).csv')
name_links <- read_csv('id_name_link.csv')
name_links <- name_links %>%
group_by(schname) %>%
mutate(n = n()) %>%
filter(n == 1)
g_trands_to_id_name <-
inner_join(G_data, name_links, by = 'schname')
final_df <- inner_join(g_trands_to_id_name, scorecard, by = c('unitid' = 'UNITID'))
View(finally_final_df)
knitr::opts_chunk$set(echo = TRUE)
## knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) HOW TO SET UP A WD?
# Installing packages
library(tidyverse)
library(purrr)
library(lubridate)
# Preparing Google trends data
# Merging Google trends data
g_files <- list.files(pattern = 'trends_up_to', full.names = TRUE)
G_data <- map_df(g_files, read_csv)
G_data <- na.omit(G_data)
#Converting date from string to date format
#summary(G_data)
G_data <- G_data %>%
mutate(YMD = ymd(str_sub(G_data$monthorweek, end = 10)))
# creating a month variable for aggregation
G_data <- G_data %>% mutate(month = floor_date(YMD, unit = 'month'))
# Standardizing Index variable
G_data <- G_data %>%
group_by(schname) %>%
mutate(st_index = (index - mean(index))/sd(index))
#summary(G_data)
#reading in the Scorecard Data
scorecard <- read_csv('Most+Recent+Cohorts+(Scorecard+Elements).csv')
name_links <- read_csv('id_name_link.csv')
# removing duplicates
name_links <- name_links %>%
group_by(schname) %>%
mutate(n = n()) %>%
filter(n == 1)
# merging the data frames
g_trands_to_id_name <-
inner_join(G_data, name_links, by = 'schname')
final_df <- inner_join(g_trands_to_id_name, scorecard, by = c('unitid' = 'UNITID'))
finally_final_df <- final_df %>%
select('schname', 'YMD', 'month', 'st_index', 'NPT4_PUB-AVERAGE-ANNUAL-COST', 'NPT4_PRIV', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1)
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
across())
View(G_summary)
finally_final_df <- final_df %>%
select('schname', 'month', 'st_index', 'NPT4_PUB-AVERAGE-ANNUAL-COST', 'NPT4_PRIV', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1)
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
across())
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
across(c('NPT4_PUB-AVERAGE-ANNUAL-COST', NPT4_PRIV, SAT_AVG, 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE', 'md_earn_wne_p10-REPORTED-EARNINGS')))
View(G_summary)
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
#across(c('NPT4_PUB-AVERAGE-ANNUAL-COST', NPT4_PRIV, SAT_AVG, 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE', 'md_earn_wne_p10-REPORTED-EARNINGS')))
annual_cost_pub = unique('NPT4_PUB-AVERAGE-ANNUAL-COST'),
annual_cost_priv = unique(NPT4_PRIV))
View(G_summary)
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
#across(c('NPT4_PUB-AVERAGE-ANNUAL-COST', NPT4_PRIV, SAT_AVG, 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE', 'md_earn_wne_p10-REPORTED-EARNINGS')))
annual_cost_pub = unique(NPT4_PUB-AVERAGE-ANNUAL-COST),
annual_cost_priv = unique(NPT4_PRIV))
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
#across(c('NPT4_PUB-AVERAGE-ANNUAL-COST', NPT4_PRIV, SAT_AVG, 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE', 'md_earn_wne_p10-REPORTED-EARNINGS')))
annual_cost_pub = unique(`NPT4_PUB-AVERAGE-ANNUAL-COST`),
annual_cost_priv = unique(NPT4_PRIV))
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
annual_cost_pub = unique(`NPT4_PUB-AVERAGE-ANNUAL-COST`),
annual_cost_priv = unique(NPT4_PRIV),
SAT = unique(SAT_AVG),
grad_rate = unique(`C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`),
median_earnings = unique(`md_earn_wne_p10-REPORTED-EARNINGS`)
)
min(G_summary$SAT)
max(G_summary$SAT)
finally_final_df <- final_df %>%
select('schname', 'month', 'st_index', 'NPT4_PUB-AVERAGE-ANNUAL-COST', 'NPT4_PRIV', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1, `md_earn_wne_p10-REPORTED-EARNINGS` != 'PrivacySupressed')
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
annual_cost_pub = unique(`NPT4_PUB-AVERAGE-ANNUAL-COST`),
annual_cost_priv = unique(NPT4_PRIV),
SAT = unique(SAT_AVG),
grad_rate = unique(`C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`),
median_earnings = unique(`md_earn_wne_p10-REPORTED-EARNINGS`)
)
str(finally_final_df)
finally_final_df %>% as.numeric(c(`NPT4_PUB-AVERAGE-ANNUAL-COST`, NPT4_PRIV, SAT_AVG, `md_earn_wne_p10-REPORTED-EARNINGS`, `C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`))
finally_final_df <- final_df %>% as.numeric(c(`NPT4_PUB-AVERAGE-ANNUAL-COST`, NPT4_PRIV, SAT_AVG, `md_earn_wne_p10-REPORTED-EARNINGS`, `C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`))
finally_final_df <- as.numeric(c(`NPT4_PUB-AVERAGE-ANNUAL-COST`, NPT4_PRIV, SAT_AVG, `md_earn_wne_p10-REPORTED-EARNINGS`, `C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`))
View(finally_final_df)
finally_final_df <- as.numeric(c('NPT4_PUB-AVERAGE-ANNUAL-COST', 'NPT4_PRIV', 'SAT_AVG', 'md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE'))
finally_final_df$`NPT4_PUB-AVERAGE-ANNUAL-COST`<- as.numeric('NPT4_PUB-AVERAGE-ANNUAL-COST')
finally_final_df <- final_df %>%
select('schname', 'month', 'st_index', 'NPT4_PUB-AVERAGE-ANNUAL-COST', 'NPT4_PRIV', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1, `md_earn_wne_p10-REPORTED-EARNINGS` != 'PrivacySupressed')
scorecard <- na.omit(scorecard)
name_links <- read_csv('id_name_link.csv')
name_links <- name_links %>%
group_by(schname) %>%
mutate(n = n()) %>%
filter(n == 1)
g_trands_to_id_name <-
inner_join(G_data, name_links, by = 'schname')
final_df <- inner_join(g_trands_to_id_name, scorecard, by = c('unitid' = 'UNITID'))
knitr::opts_chunk$set(echo = TRUE)
## knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) HOW TO SET UP A WD?
# Installing packages
library(tidyverse)
library(purrr)
library(lubridate)
# Preparing Google trends data
# Merging Google trends data
g_files <- list.files(pattern = 'trends_up_to', full.names = TRUE)
G_data <- map_df(g_files, read_csv)
G_data <- na.omit(G_data)
#Converting date from string to date format
#summary(G_data)
G_data <- G_data %>%
mutate(YMD = ymd(str_sub(G_data$monthorweek, end = 10)))
# creating a month variable for aggregation
G_data <- G_data %>% mutate(month = floor_date(YMD, unit = 'month'))
# Standardizing Index variable
G_data <- G_data %>%
group_by(schname) %>%
mutate(st_index = (index - mean(index))/sd(index))
#summary(G_data)
#reading in the Scorecard Data
scorecard <- read_csv('Most+Recent+Cohorts+(Scorecard+Elements).csv')
scorecard <- na.omit(scorecard)
name_links <- read_csv('id_name_link.csv')
# removing duplicates
name_links <- name_links %>%
group_by(schname) %>%
mutate(n = n()) %>%
filter(n == 1)
# merging the data frames
g_trands_to_id_name <-
inner_join(G_data, name_links, by = 'schname')
final_df <- inner_join(g_trands_to_id_name, scorecard, by = c('unitid' = 'UNITID'))
finally_final_df <- final_df %>%
select('schname', 'month', 'st_index', 'NPT4_PUB-AVERAGE-ANNUAL-COST', 'NPT4_PRIV', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1, `md_earn_wne_p10-REPORTED-EARNINGS` != 'PrivacySupressed')
finally_final_df <- finally_final_df %>%
mutate_if(is.character, as.numeric)
View(finally_final_df)
View(finally_final_df)
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
annual_cost_pub = unique(`NPT4_PUB-AVERAGE-ANNUAL-COST`),
annual_cost_priv = unique(NPT4_PRIV),
SAT = unique(SAT_AVG),
grad_rate = unique(`C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`),
median_earnings = unique(`md_earn_wne_p10-REPORTED-EARNINGS`)
)
View(G_summary)
final_df <- final_df %>%
mutate(
cost = case_when(CONTROL == 1 ~ `NPT4_PUB-AVERAGE-ANNUAL-COST`,
CONTROL == 2 ~ NPT4_PRIV,
CONTROL == 3 ~ NPT4_PRIV)
)
View(final_df)
finally_final_df <- final_df %>%
select('schname', 'month', 'st_index', 'cost', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1, `md_earn_wne_p10-REPORTED-EARNINGS` != 'PrivacySupressed')
finally_final_df <- finally_final_df %>%
mutate_if(is.character, as.numeric)
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
annual_cost = unique(cost),
SAT = unique(SAT_AVG),
grad_rate = unique(`C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`),
median_earnings = unique(`md_earn_wne_p10-REPORTED-EARNINGS`)
)
View(G_summary)
G_summary <- na.omit(G_summary)
View(G_summary)
knitr::opts_chunk$set(echo = TRUE)
## knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) HOW TO SET UP A WD?
# Installing packages
library(tidyverse)
library(purrr)
library(lubridate)
# Preparing Google trends data
# Merging Google trends data
g_files <- list.files(pattern = 'trends_up_to', full.names = TRUE)
G_data <- map_df(g_files, read_csv)
G_data <- na.omit(G_data)
#Converting date from string to date format
#summary(G_data)
G_data <- G_data %>%
mutate(YMD = ymd(str_sub(G_data$monthorweek, end = 10)))
# creating a month variable for aggregation
G_data <- G_data %>% mutate(month = floor_date(YMD, unit = 'month'))
# Standardizing Index variable
G_data <- G_data %>%
group_by(schname) %>%
mutate(st_index = (index - mean(index))/sd(index))
#summary(G_data)
#reading in the Scorecard Data
scorecard <- read_csv('Most+Recent+Cohorts+(Scorecard+Elements).csv')
scorecard <- na.omit(scorecard)
name_links <- read_csv('id_name_link.csv')
# removing duplicates
name_links <- name_links %>%
group_by(schname) %>%
mutate(n = n()) %>%
filter(n == 1)
# merging the data frames
g_trands_to_id_name <-
inner_join(G_data, name_links, by = 'schname')
final_df <- inner_join(g_trands_to_id_name, scorecard, by = c('unitid' = 'UNITID'))
final_df <- final_df %>%
mutate(
cost = case_when(CONTROL == 1 ~ `NPT4_PUB-AVERAGE-ANNUAL-COST`,
CONTROL == 2 ~ NPT4_PRIV,
CONTROL == 3 ~ NPT4_PRIV)
)
finally_final_df <- final_df %>%
select('schname', 'month', 'st_index', 'cost', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1, `md_earn_wne_p10-REPORTED-EARNINGS` != 'PrivacySupressed')
finally_final_df <- finally_final_df %>%
mutate_if(is.character, as.numeric)
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
annual_cost = unique(cost),
SAT = unique(SAT_AVG),
grad_rate = unique(`C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`),
median_earnings = unique(`md_earn_wne_p10-REPORTED-EARNINGS`)
)
G_summary <- na.omit(G_summary)
View(G_summary)
G_summary <- mutate(time = case_when(month >= as.Date('2015-09-01') ~ 1, month < as.Date('2015-09-01') ~ 0))
G_summary <- mutate(time = case_when(month >= '2015-09-01' ~ 1, month < '2015-09-01' ~ 0))
library(swirl)
swirl()
library(tidyverse)
library(lubridate)
library(fixest)
library(gtrendsR)
library(haven)
skip()
trends_time <- trends$interest_over_time %>% as_tibble() %>% mutate(date = ymd(date))
skip()
skip()
skip()
G_summary <- mutate(time = case_when(month >= as.Date("2015-09-01") ~ 1, month < as.date("2015-09-01") ~ 0))
View(G_summary)
quantile(G_summary$median_earnings)
0
bye()
G_summary <- mutate(hi_low = case_when(median_earnings <= 36600 ~ 0, median_earnings > 47300 ~ 1))
G_summary <- G_summary %>% mutate(hi_low = case_when(median_earnings <= 36600 ~ 0, median_earnings > 47300 ~ 1))
G_summary <- mutate(time = case_when(month >= as.Date("2015-09-01") ~ 1, month < as.date("2015-09-01") ~ 0))
View(G_summary)
typeof(G_data$month)
G_summary <- mutate(time = case_when(as.Date(month) >= as.Date("2015-09-01") ~ 1, as.Date(month) < as.date("2015-09-01") ~ 0))
G_summary <- mutate(month = ymd(month))
final_df <- final_df %>%
mutate(
cost = case_when(CONTROL == 1 ~ `NPT4_PUB-AVERAGE-ANNUAL-COST`,
CONTROL == 2 ~ NPT4_PRIV,
CONTROL == 3 ~ NPT4_PRIV)
)
finally_final_df <- final_df %>%
select('schname', 'month', 'st_index', 'cost', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1, `md_earn_wne_p10-REPORTED-EARNINGS` != 'PrivacySupressed') %>%
mutate(time = case_when(month >= as.Date("2015-09-01") ~ 1, month < as.date("2015-09-01") ~ 0)
View(finally_final_df)
finally_final_df <- final_df %>%
select('schname', 'month', 'st_index', 'cost', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1, `md_earn_wne_p10-REPORTED-EARNINGS` != 'PrivacySupressed') %>%
mutate(time = case_when(month >= as.Date('2015-09-01') ~ 1, month < as.date('2015-09-01') ~ 0)
finally_final_df <- final_df %>%
finally_final_df <- final_df %>%
select('schname', 'month', 'st_index', 'cost', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1, `md_earn_wne_p10-REPORTED-EARNINGS` != 'PrivacySupressed') %>%
mutate(time = case_when(month >= as.Date("2015-09-01") ~ 1, month < as.date("2015-09-01") ~ 0))
finally_final_df <- final_df %>%
select('schname', 'month', 'st_index', 'cost', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1, `md_earn_wne_p10-REPORTED-EARNINGS` != 'PrivacySupressed') %>%
mutate(time = case_when(month >= as.Date("2015-09-01") ~ 1, month < as.Date("2015-09-01") ~ 0))
View(finally_final_df)
finally_final_df <- finally_final_df %>%
mutate_if(is.character, as.numeric)
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
annual_cost = unique(cost),
SAT = unique(SAT_AVG),
grad_rate = unique(`C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`),
median_earnings = unique(`md_earn_wne_p10-REPORTED-EARNINGS`),
time = unique(time)
)
G_summary <- na.omit(G_summary)
G_summary <- G_summary %>% mutate(hi_low = case_when(median_earnings <= 36600 ~ 0, median_earnings > 47300 ~ 1))
knitr::opts_chunk$set(echo = TRUE)
## knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) HOW TO SET UP A WD?
# Installing packages
library(tidyverse)
library(purrr)
library(lubridate)
library(fixest)
# Preparing Google trends data
# Merging Google trends data
g_files <- list.files(pattern = 'trends_up_to', full.names = TRUE)
G_data <- map_df(g_files, read_csv)
G_data <- na.omit(G_data)
#Converting date from string to date format
#summary(G_data)
G_data <- G_data %>%
mutate(YMD = ymd(str_sub(G_data$monthorweek, end = 10)))
# creating a month variable for aggregation
G_data <- G_data %>% mutate(month = floor_date(YMD, unit = 'month'))
# Standardizing Index variable
G_data <- G_data %>%
group_by(schname, keyword) %>%
mutate(st_index = (index - mean(index))/sd(index))
#reading in the Scorecard Data
scorecard <- read_csv('Most+Recent+Cohorts+(Scorecard+Elements).csv')
scorecard <- na.omit(scorecard)
name_links <- read_csv('id_name_link.csv')
# removing duplicates
name_links <- name_links %>%
group_by(schname) %>%
mutate(n = n()) %>%
filter(n == 1)
# merging the data frames
g_trends_to_id_name <-
inner_join(G_data, name_links, by = 'schname')
final_df <- inner_join(g_trends_to_id_name, scorecard, by = c('unitid' = 'UNITID'))
final_df <- final_df %>%
mutate(
cost = case_when(CONTROL == 1 ~ `NPT4_PUB-AVERAGE-ANNUAL-COST`,
CONTROL == 2 ~ NPT4_PRIV,
CONTROL == 3 ~ NPT4_PRIV)
)
finally_final_df <- final_df %>%
select('schname', 'month', 'st_index', 'cost', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1, `md_earn_wne_p10-REPORTED-EARNINGS` != 'PrivacySupressed') %>%
mutate(time = case_when(month >= as.Date("2015-09-01") ~ 1, month < as.Date("2015-09-01") ~ 0))
finally_final_df <- finally_final_df %>%
mutate_if(is.character, as.numeric)
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
annual_cost = unique(cost),
SAT = unique(SAT_AVG),
grad_rate = unique(`C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`),
median_earnings = unique(`md_earn_wne_p10-REPORTED-EARNINGS`),
time = factor(time)
)
G_summary <- na.omit(G_summary)
G_summary <- G_summary %>% mutate(hi_low = case_when(median_earnings <= 36600 ~ 1, median_earnings < 41400 ~2, median_earnings < 47300 ~ 3, median_earnings > 47300 ~ 4)) %>% factor(hi_low)
G_summary <- G_summary %>% mutate(hi_low = case_when(median_earnings <= 36600 ~ 1, median_earnings < 41400 ~2, median_earnings < 47300 ~ 3, median_earnings > 47300 ~ 4))
G_summary <- G_summary %>% factor(hi_low)
G_summary <- G_summary %>% factor(as.charachter(hi_low))
View(G_summary)
G_summary <- G_summary %>% factor('hi_low')
G_summary$hi_low <- factor(G_summary$hi_low)
str(G_summary)
all_model <- feols(mean_index ~ time + hi_low, data = G_summary)
etable(all_model)
View(G_summary)
# Preparing Google trends data
# Merging Google trends data
g_files <- list.files(pattern = 'trends_up_to', full.names = TRUE)
G_data <- map_df(g_files, read_csv)
G_data <- na.omit(G_data)
#Converting date from string to date format
#summary(G_data)
G_data <- G_data %>%
mutate(YMD = ymd(str_sub(G_data$monthorweek, end = 10)))
# creating a month variable for aggregation
G_data <- G_data %>% mutate(month = floor_date(YMD, unit = 'month'))
# Standardizing Index variable
G_data <- G_data %>%
group_by(schname) %>%
mutate(st_index = (index - mean(index))/sd(index))
#reading in the Scorecard Data
scorecard <- read_csv('Most+Recent+Cohorts+(Scorecard+Elements).csv')
scorecard <- na.omit(scorecard)
name_links <- read_csv('id_name_link.csv')
# removing duplicates
name_links <- name_links %>%
group_by(schname) %>%
mutate(n = n()) %>%
filter(n == 1)
# merging the data frames
g_trends_to_id_name <-
inner_join(G_data, name_links, by = 'schname')
final_df <- inner_join(g_trends_to_id_name, scorecard, by = c('unitid' = 'UNITID'))
final_df <- final_df %>%
mutate(
cost = case_when(CONTROL == 1 ~ `NPT4_PUB-AVERAGE-ANNUAL-COST`,
CONTROL == 2 ~ NPT4_PRIV,
CONTROL == 3 ~ NPT4_PRIV)
)
finally_final_df <- final_df %>%
select('schname', 'month', 'st_index', 'cost', 'PREDDEG', 'SAT_AVG', 'CURROPER','md_earn_wne_p10-REPORTED-EARNINGS', 'C150_4_POOLED_SUPP-REPORTED-GRAD-RATE') %>%
filter(PREDDEG == 3, CURROPER == 1, `md_earn_wne_p10-REPORTED-EARNINGS` != 'PrivacySupressed') %>%
mutate(time = case_when(month >= as.Date("2015-09-01") ~ 1, month < as.Date("2015-09-01") ~ 0))
finally_final_df <- finally_final_df %>%
mutate_if(is.character, as.numeric)
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
annual_cost = unique(cost),
SAT = unique(SAT_AVG),
grad_rate = unique(`C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`),
median_earnings = unique(`md_earn_wne_p10-REPORTED-EARNINGS`),
time = factor(time)
)
G_summary <- na.omit(G_summary)
View(G_summary)
View(G_data)
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
annual_cost = unique(cost),
SAT = unique(SAT_AVG),
grad_rate = unique(`C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`),
median_earnings = unique(`md_earn_wne_p10-REPORTED-EARNINGS`),
time = factor(time)
)
G_summary <- na.omit(G_summary)
low_vs_high <- G_summary %>%
filter(hi_low == 1 | hi_low == 4) %>%
group_by(hi_low, month) %>%
summarize(index = mean(mean_index))%>%
ggplot(aes(x = month, y = index, colour = hi_low)) +
geom_line(aes(group = hi_low)) +
geom_point()
G_summary <- G_summary %>% mutate(hi_low = case_when(median_earnings <= 36600 ~ 1, median_earnings < 41400 ~2, median_earnings < 47300 ~ 3, median_earnings > 47300 ~ 4))
G_summary$hi_low <- factor(G_summary$hi_low)
low_vs_high <- G_summary %>%
filter(hi_low == 1 | hi_low == 4) %>%
group_by(hi_low, month) %>%
summarize(index = mean(mean_index))%>%
ggplot(aes(x = month, y = index, colour = hi_low)) +
geom_line(aes(group = hi_low)) +
geom_point()
low_vs_high
G_summary <- finally_final_df %>%
group_by(schname, month) %>%
summarize(
mean_index = mean(st_index),
annual_cost = unique(cost),
SAT = unique(SAT_AVG),
grad_rate = unique(`C150_4_POOLED_SUPP-REPORTED-GRAD-RATE`),
median_earnings = unique(`md_earn_wne_p10-REPORTED-EARNINGS`),
time = unique(time)
)
G_summary <- na.omit(G_summary)
G_summary <- G_summary %>% mutate(hi_low = case_when(median_earnings <= 36600 ~ 1, median_earnings < 41400 ~2, median_earnings < 47300 ~ 3, median_earnings > 47300 ~ 4))
G_summary$hi_low <- factor(G_summary$hi_low)
G_summary$time <- factor(G_summary$time)
low_vs_high <- G_summary %>%
filter(hi_low == 1 | hi_low == 4) %>%
group_by(hi_low, month) %>%
summarize(index = mean(mean_index))%>%
ggplot(aes(x = month, y = index, colour = hi_low)) +
geom_line(aes(group = hi_low)) +
geom_point()
low_vs_high
View(G_summary)
all_model <- feols(mean_index ~ time + hi_low, data = G_summary)
etable(all_model)
all_model <- feols(mean_index ~ time + hi_low, data = G_summary)
interaction <- feols(mean_index ~ month * time, data = G_summary)
fe_model <- feols(mean_index ~ time * hi_low | schname, data = G_summary)
etable(all_model, interaction, fe_model)
